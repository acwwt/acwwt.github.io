<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>网络服务 | 苹果屋🍎</title><meta name="keywords" content="linux自动化运维"><meta name="author" content="爱吃窝窝头"><meta name="copyright" content="爱吃窝窝头"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="网络服务"><meta name="application-name" content="网络服务"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta name="referrer" content="no-referrer"><meta property="og:type" content="article"><meta property="og:title" content="网络服务"><meta property="og:url" content="https://acwwt.github.io/posts/4416b5c/index.html"><meta property="og:site_name" content="苹果屋🍎"><meta property="og:description" content="第五章 网络服务1.DHCP服务1.1DHCP定义DHCP（Dynamic Host Configuration Protocol，动态主机配置协议）是一个局域网的网络协议，使用UDP协议工作。它是一种流行的Client&amp;#x2F;Server协议，一般用于为主机或者为路由器等指定相关的配置信息。D"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://acwwt.github.io/img/head.png"><meta property="article:author" content="爱吃窝窝头"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://acwwt.github.io/img/head.png"><meta name="description" content="第五章 网络服务1.DHCP服务1.1DHCP定义DHCP（Dynamic Host Configuration Protocol，动态主机配置协议）是一个局域网的网络协议，使用UDP协议工作。它是一种流行的Client&amp;#x2F;Server协议，一般用于为主机或者为路由器等指定相关的配置信息。D"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://acwwt.github.io/posts/4416b5c/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"tianli","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"72ba57696a9755cfcfd5","Referer":"https://acwwt.github.io"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: 'https://twikoo.lingkongstudy.com.cn/',
  commentBarrageConfig:{"enable":true,"maxBarrage":1,"barrageTime":4000,"accessToken":"e0859b35a14d4db7806c86c7ff514c73","mailMd5":"51e3c8a100c5723ab7110574725107a1"},
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","🤝 专修交互与设计","🏃 脚踏实地行动派","🧱 团队小组发动机","💢 壮汉人狠话不多"]},
  algolia: {"appId":"HZI5IRNK61","apiKey":"0f2ce595195912a0310823261fb78fd7","indexName":"hexo","hits":{"per_page":6},"languages":{"input_placeholder":"输入关键词后按下回车查找","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    simplehomepage: false,
    post: true
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: 爱吃窝窝头","link":"链接: ","source":"来源: 苹果屋🍎","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: {"enable":true,"delay":100,"shiftDelay":200},
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '苹果屋🍎',
  title: '网络服务',
  postAI: 'true',
  pageFillDescription: '第五章 网络服务, 1.DHCP服务, 1.1DHCP定义, 1.2实验规划, 1.3实验过程, 1.4实验结果, 2.DNS服务, 2.1配置静态ip地址, 2.2 安装服务软件包, 2.3 配置DNS, 2.3.1修改主配置文件, 2.3.2 修改区域配置文件, 2.3.3 修改正向解析文件, 2.3.4 修改反向解析文件, 2.5 客户端测试, 2.5.1 安装工具包, 2.5.3 测试, 3.电子邮件服务, 1.设置hostname并更新 x2Fetcx2Fhosts, 2.安装并启用 Postfix 服务, 3.安装 mailx 邮件客户端, 4.配置 Postfix 邮件服务器, 5.测试邮件服务, 4.FTP服务, 4.1 安装vsftpd+ftp, 4.2 开启服务, 4.3 修改配置文件, 4.4测试准备, 5.注意事项第五章网络服务服务定义动态主机配置协议是一个局域网的网络协议使用协议工作它是一种流行的协议一般用于为主机或者为路由器等指定相关的配置信息服务在企业和家庭中得到了大量的应用它能够自动分配地址以及一些其他的相关信息整个过程对客户透明实验规划该实验需要两台虚拟机一台作为服务器另一台做为主机用来验证服务是否可用首先新增一个网卡将他的服务关掉将主机的网卡设置为实验过程服务端安装服务修改配置文件在下面添加下面的内容修改的网卡配置给一个静态有线连接重启网卡并启动服务主机修改网卡配置文件将改成重启网卡实验结果服务配置静态地址安装服务软件包上次元数据过期检查前执行于年月日星期一时分秒软件包已安装软件包已安装依赖关系解决软件包架构版本仓库大小安装安装依赖关系事务概要安装软件包总下载安装大小下载软件包总计运行事务检查事务检查成功运行事务测试事务测试成功运行事务准备中安装安装安装运行脚本验证验证验证已安装完毕配置修改主配置文件检查是否有错误修改区域配置文件复制系统提供的文件为我们自己的这里的文件名要和上图红框中所写的文件名保持一致注意复制时使用参数保持文件权限属性一致复制后查看复制的文件查看文件所属组是否为这里如果为的话启动服务器会失败月修改区域配置文件位置处的必须为我们向上一级域名机构所申请的域名此处内容不能随便乱写位置处的为正向查找即由域名查找主机地址区域所在的文件名文件名可以任意制定但是必须和下面步骤所配置的正向查找区域文件名一致位置处的为反向查找区域即由地址查找域名网络地址的反向书写例子中的就是网络地址网络该区域指定的地址只能是这个网段的位置处为反响查找区域所在的文件名文件名可以任意制定但是必须和下面步骤所配置的反向查找区域文件名一致修改正向解析文件配置正向查找区域配置文件如果文件不存在可以复制现有的实例文件注意加参数月配置此文件修改反向解析文件配置反向查找区域配置文件如果文件不存在可以复制现有的实例文件注意加参数月配置该文件修改文件添加启动注意如果你的服务启动失败一定要检查一下配置文件是否出错例如出现这种字段的是没有问题的如果出现其他类型的说明你的配置文件就有点问题下面是几个配置文件的关系首先中调用了文件也就是然后里面写的内容对应的是后面的两个文件如果你检查出错误了一定要在这四个文件里面去找是否哪个地方写错了最好是逐级去找客户端测试安装工具包与服务端配置的保持一致测试二月如果测试失败把防火墙关掉电子邮件服务设置并更新安装并启用服务安装邮件客户端在配置服务器之前我们需要安装配置邮件服务器的配置文件位于中我们需要对配置文件进行一些修改更新如下完成后保存并退出配置文件重新启动服务以使更改生效测试邮件服务首先创建一个测试用户安装测试服务向服务器表明身份设置寄件人设置收件人服务安装测试使用搭建服务器只需要开启服务修改配置文件配置文件默认为首先修改再添加一行第一行的意思是允许匿名登录第二行的意思是允许匿名上传接着重启服务测试准备安装部分就算完成了下面是测试在测试之前先创建测试文件在主机上测试如图所示在测试之前要关闭防火墙和关闭或者是开启端口对应的服务临时关闭用户登录测试在地址栏输入这里可以选择是否匿名登录还有其他的测试方式可以根据书本上所说的自行测试这里只简单做个测试还有一点就是我这里用的是我上面做邮件服务时新增的用户登陆的里面存放着文件夹这个路径下存放的就是我们在邮件服务中发送的内容了注意事项在做服务的时候要确定好自己服务端的网卡配置服务端是两张网卡客户端是一个网卡在做服务的时候一定要仔细检查修改的文件有没有问题哪怕一个字符错了都会导致你服务失败',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-11-30 17:11:03',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.0.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="/img/head.png"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://smiling-bear-ii.gitee.io/lingkong/" title="Gitee博客"><img class="back-menu-item-icon" src="favicon.ico" alt="Gitee博客"/><span class="back-menu-item-text">Gitee博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">苹果屋🍎</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=1345196066&amp;server=tencent"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" alt="微信" src="/img/wechat.jpg"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="/img/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/C%E8%AF%AD%E8%A8%80/" style="font-size: 1.05rem;">C语言<sup>19</sup></a><a href="/tags/Docker%E5%AD%A6%E4%B9%A0/" style="font-size: 1.05rem;">Docker学习<sup>1</sup></a><a href="/tags/linux%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4/" style="font-size: 1.05rem;">linux自动化运维<sup>9</sup></a><a href="/tags/python%E5%9F%BA%E7%A1%80/" style="font-size: 1.05rem;">python基础<sup>4</sup></a><a href="/tags/python%E5%AE%9E%E6%88%98/" style="font-size: 1.05rem;">python实战<sup>5</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">十一月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">38</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/01/"><span class="card-archive-list-date">一月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">18</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div><div class="console-btn-item" id="consoleKeyboard" onclick="anzhiyu.keyboardToggle()" title="快捷键开关"><a class="keyboard-switch"><i class="anzhiyufont anzhiyu-icon-keyboard"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="article-meta tags"><a class="article-meta__tags" href="/tags/linux%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>linux自动化运维</span></a></span></div></div><h1 class="post-title" itemprop="name headline">网络服务</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2023-11-30T09:11:03.882Z" title="发表于 2023-11-30 17:11:03">2023-11-30</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2023-11-30T09:11:03.882Z" title="更新于 2023-11-30 17:11:03">2023-11-30</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="网络服务"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为河南"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>河南</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src=""></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><div class="post-ai-description"><div class="ai-title"><i class="anzhiyufont anzhiyu-icon-bilibili"></i><div class="ai-title-text">AI-摘要</div><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i><i class="anzhiyufont anzhiyu-icon-circle-dot" title="朗读摘要"></i><div id="ai-tag">Tianli GPT</div></div><div class="ai-explanation">AI初始化中...</div><div class="ai-btn-box"><div class="ai-btn-item">介绍自己 🙈</div><div class="ai-btn-item">生成本文简介 👋</div><div class="ai-btn-item">推荐相关文章 📖</div><div class="ai-btn-item">前往主页 🏠</div><div class="ai-btn-item" id="go-tianli-blog">前往爱发电购买</div></div><script data-pjax src="/js/anzhiyu/ai_abstract.js"></script></div><article class="post-content" id="article-container" itemscope itemtype="https://acwwt.github.io/posts/4416b5c/"><header><a href="/tags/linux%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4/" tabindex="-1" itemprop="url">linux自动化运维</a><h1 id="CrawlerTitle" itemprop="name headline">网络服务</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">爱吃窝窝头</span><time itemprop="dateCreated datePublished" datetime="2023-11-30T09:11:03.882Z" title="发表于 2023-11-30 17:11:03">2023-11-30</time><time itemprop="dateCreated datePublished" datetime="2023-11-30T09:11:03.882Z" title="更新于 2023-11-30 17:11:03">2023-11-30</time></header><h1 id="第五章-网络服务"><a href="#第五章-网络服务" class="headerlink" title="第五章 网络服务"></a>第五章 网络服务</h1><h2 id="1-DHCP服务"><a href="#1-DHCP服务" class="headerlink" title="1.DHCP服务"></a>1.DHCP服务</h2><h3 id="1-1DHCP定义"><a href="#1-1DHCP定义" class="headerlink" title="1.1DHCP定义"></a>1.1DHCP定义</h3><p>DHCP（Dynamic Host Configuration Protocol，动态主机配置协议）是一个局域网的网络协议，使用UDP协议工作。它是一种流行的Client&#x2F;Server协议，一般用于为主机或者为路由器等指定相关的配置信息。DHCP服务在企业和家庭中得到了大量的应用，它能够自动分配ip地址以及一些其他的相关信息，整个过程对客户透明。</p>
<h3 id="1-2实验规划"><a href="#1-2实验规划" class="headerlink" title="1.2实验规划"></a>1.2实验规划</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://oss.lingkongstudy.com.cn/linux/image-20231008175319304.png" alt="image-20231017115116277"></p>
<p>该实验需要两台虚拟机,一台作为DHCP服务器另一台做为主机用来验证dhcp服务是否可用.</p>
<p>首先新增一个网卡将他的DHCP服务关掉,将主机的网卡设置为VMnet2</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://oss.lingkongstudy.com.cn/linux/image-20231017115527925.png" alt="image-20231017115527925"></p>
<h3 id="1-3实验过程"><a href="#1-3实验过程" class="headerlink" title="1.3实验过程"></a>1.3实验过程</h3><ol>
<li><p>服务端</p>
<p>1.安装DHCP服务</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum -y install dhcp*</span><br></pre></td></tr></table></figure>

<p>2.修改dhcp配置文件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@gzh-cs8 ~]<span class="comment"># cp /usr/share/doc/dhcp-server/dhcpd.conf.example  /etc/dhcp/dhcpd.conf</span></span><br><span class="line">[root@gzh-cs8 ~]<span class="comment"># vim /etc/dhcp/dhcpd.conf</span></span><br></pre></td></tr></table></figure>

<p>在下面添加下面的内容</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">subnet 192.168.145.0 netmask 255.255.255.0 &#123;</span><br><span class="line">        range 192.168.145.100 192.168.145.200;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.修改VMnet2的网卡配置给一个静态ip</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@gzh-cs8 ~]<span class="comment"># cp /etc/sysconfig/network-scripts/ifcfg-ens160 /etc/sysconfig/network-scripts/ifcfg-ens224</span></span><br><span class="line">[root@gzh-cs8 ~]<span class="comment"># nmcli con show </span></span><br><span class="line">NAME        UUID                                  TYPE      DEVICE </span><br><span class="line">有线连接 1  3ffd2935-0618-301b-a04e-4738c579c9c5  ethernet  ens224 </span><br><span class="line">ens160      af04ba70-cb39-4017-afed-3f23f616c00c  ethernet  ens160 </span><br><span class="line">[root@gzh-cs8 ~]<span class="comment"># vim /etc/sysconfig/network-scripts/ifcfg-ens224 </span></span><br><span class="line">[root@gzh-cs8 ~]<span class="comment"># nmcli c reload</span></span><br></pre></td></tr></table></figure>

<p>4.重启网卡并启动dhcp服务</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">nmcli c reload </span><br><span class="line">systemctl start dhcpd</span><br></pre></td></tr></table></figure>
</li>
<li><p>主机</p>
<p>1.修改网卡配置文件将<code>BOOTPROTO</code>改成dhcp</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://oss.lingkongstudy.com.cn/linux/image-20231017120243183.png" alt="image-20231017120243183"></p>
<p>2.重启网卡</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl restart network</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="1-4实验结果"><a href="#1-4实验结果" class="headerlink" title="1.4实验结果"></a>1.4实验结果</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://oss.lingkongstudy.com.cn/linux/image-20231017121550201.png" alt="image-20231017121550201"></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@gzh-cs8 ~]<span class="comment"># ping 192.168.145.100</span></span><br><span class="line">PING 192.168.145.100 (192.168.145.100) 56(84) bytes of data.</span><br><span class="line">64 bytes from 192.168.145.100: icmp_seq=1 ttl=64 time=0.356 ms</span><br><span class="line">64 bytes from 192.168.145.100: icmp_seq=2 ttl=64 time=0.387 ms</span><br><span class="line">64 bytes from 192.168.145.100: icmp_seq=3 ttl=64 time=0.600 ms</span><br><span class="line">^C</span><br><span class="line">--- 192.168.145.100 ping statistics ---</span><br><span class="line">3 packets transmitted, 3 received, 0% packet loss, time 2049ms</span><br><span class="line">rtt min/avg/max/mdev = 0.356/0.447/0.600/0.111 ms</span><br></pre></td></tr></table></figure>

<h2 id="2-DNS服务"><a href="#2-DNS服务" class="headerlink" title="2.DNS服务"></a>2.DNS服务</h2><h3 id="2-1配置静态ip地址"><a href="#2-1配置静态ip地址" class="headerlink" title="2.1配置静态ip地址"></a>2.1配置静态ip地址</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /etc/sysconfig/network-scripts/ifcfg-ens160</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://oss.lingkongstudy.com.cn/linux/image-20231017200551993.png" alt="image-20231017200551993"></p>
<h3 id="2-2-安装服务软件包"><a href="#2-2-安装服务软件包" class="headerlink" title="2.2 安装服务软件包"></a>2.2 安装服务软件包</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@gzh-cs8 ~]<span class="comment"># yum install -y bind bind-chroot bind-utils</span></span><br><span class="line">上次元数据过期检查：9:33:52 前，执行于 2023年10月16日 星期一 22时33分11秒。</span><br><span class="line">软件包 bind-32:9.11.26-6.el8.x86_64 已安装。</span><br><span class="line">软件包 bind-chroot-32:9.11.26-6.el8.x86_64 已安装。</span><br><span class="line">依赖关系解决。</span><br><span class="line">==========================================================================================================</span><br><span class="line"> 软件包                    架构                版本                          仓库                    大小</span><br><span class="line">==========================================================================================================</span><br><span class="line">安装:</span><br><span class="line"> bind-utils                x86_64              32:9.11.26-6.el8              AppStream              451 k</span><br><span class="line">安装依赖关系:</span><br><span class="line"> python3-bind              noarch              32:9.11.26-6.el8              AppStream              150 k</span><br><span class="line"> python3-ply               noarch              3.9-9.el8                     base                   111 k</span><br><span class="line"></span><br><span class="line">事务概要</span><br><span class="line">==========================================================================================================</span><br><span class="line">安装  3 软件包</span><br><span class="line"></span><br><span class="line">总下载：712 k</span><br><span class="line">安装大小：1.9 M</span><br><span class="line">下载软件包：</span><br><span class="line">(1/3): python3-ply-3.9-9.el8.noarch.rpm                                    21 kB/s | 111 kB     00:05    </span><br><span class="line">(2/3): python3-bind-9.11.26-6.el8.noarch.rpm                               27 kB/s | 150 kB     00:05    </span><br><span class="line">(3/3): bind-utils-9.11.26-6.el8.x86_64.rpm                                 80 kB/s | 451 kB     00:05    </span><br><span class="line">----------------------------------------------------------------------------------------------------------</span><br><span class="line">总计                                                                      126 kB/s | 712 kB     00:05     </span><br><span class="line">运行事务检查</span><br><span class="line">事务检查成功。</span><br><span class="line">运行事务测试</span><br><span class="line">事务测试成功。</span><br><span class="line">运行事务</span><br><span class="line">  准备中  :                                                                                           1/1 </span><br><span class="line">  安装    : python3-ply-3.9-9.el8.noarch                                                              1/3 </span><br><span class="line">  安装    : python3-bind-32:9.11.26-6.el8.noarch                                                      2/3 </span><br><span class="line">  安装    : bind-utils-32:9.11.26-6.el8.x86_64                                                        3/3 </span><br><span class="line">  运行脚本: bind-utils-32:9.11.26-6.el8.x86_64                                                        3/3 </span><br><span class="line">  验证    : python3-ply-3.9-9.el8.noarch                                                              1/3 </span><br><span class="line">  验证    : bind-utils-32:9.11.26-6.el8.x86_64                                                        2/3 </span><br><span class="line">  验证    : python3-bind-32:9.11.26-6.el8.noarch                                                      3/3 </span><br><span class="line"></span><br><span class="line">已安装:</span><br><span class="line">  bind-utils-32:9.11.26-6.el8.x86_64  python3-bind-32:9.11.26-6.el8.noarch  python3-ply-3.9-9.el8.noarch </span><br><span class="line"></span><br><span class="line">完毕！</span><br></pre></td></tr></table></figure>

<h3 id="2-3-配置DNS"><a href="#2-3-配置DNS" class="headerlink" title="2.3 配置DNS"></a>2.3 配置DNS</h3><h4 id="2-3-1修改主配置文件"><a href="#2-3-1修改主配置文件" class="headerlink" title="2.3.1修改主配置文件"></a>2.3.1修改主配置文件</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /etc/named.conf</span><br></pre></td></tr></table></figure>



<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://oss.lingkongstudy.com.cn/linux/image-20231017201124527.png" alt="image-20231017201124527"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://oss.lingkongstudy.com.cn/linux/image-20231017201725583.png" alt="image-20231017201725583"></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">named-checkconf <span class="comment"># 检查是否有错误</span></span><br></pre></td></tr></table></figure>

<h4 id="2-3-2-修改区域配置文件"><a href="#2-3-2-修改区域配置文件" class="headerlink" title="2.3.2 修改区域配置文件"></a>2.3.2 修改区域配置文件</h4><p>复制系统提供的zones文件为我们自己的，这里的文件名要和上图红框中所写的文件名保持一致， 注意复制时，使用参数-p保持文件权限属性一致。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cp</span> -p /etc/named.rfc1912.zones /etc/named.gzh.zones</span><br></pre></td></tr></table></figure>

<p>复制后查看复制的文件，查看文件所属组是否为named，这里如果为root的话启动服务器会失败。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@gzh-cs8 ~]<span class="comment"># ll /etc/named.gzh.zones </span></span><br><span class="line">-rw-r-----. 1 root named 1029 8月  24 2021 /etc/named.gzh.zones</span><br></pre></td></tr></table></figure>

<p>修改区域配置文件 &#x2F;etc&#x2F;named.gzh.zones</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /etc/named.gzh.zones</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://oss.lingkongstudy.com.cn/linux/image-20231017212520803.png" alt="image-20231017212520803"></p>
<ul>
<li><p>位置1处的“gzh.co”必须为我们向上一级域名机构所申请的域名，此处内容不能随便乱写。</p>
</li>
<li><p>位置2处的为正向查找（即由域名查找主机IP地址）区域所在的文件名，文件名可以任意制定，但 是必须和下面步骤所配置的正向查找区域文件名一致。</p>
</li>
<li><p>位置3处的“88.168.192”为反向查找区域（即由IP地址查找域名）网络地址的反向书写，例子中的 就是网络地址192.168.88.0&#x2F;24网络，该区域指定的IP地址只能是这个网段的。</p>
</li>
<li><p>位置4处为反响查找区域所在的文件名，文件名可以任意制定，但是必须和下面步骤所配置的反向 查找区域文件名一致。</p>
</li>
</ul>
<h4 id="2-3-3-修改正向解析文件"><a href="#2-3-3-修改正向解析文件" class="headerlink" title="2.3.3 修改正向解析文件"></a>2.3.3 修改正向解析文件</h4><p>配置正向查找区域，配置文件&#x2F;var&#x2F;named&#x2F;named.gzh.co</p>
<p>如果文件不存在，可以复制现有的实例文件，注意加参数-p</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@gzh-cs8 ~]<span class="comment"># cp -p /var/named/named.localhost /var/named/named.gzh.co</span></span><br><span class="line">[root@gzh-cs8 ~]<span class="comment"># ll /var/named/named.gzh.co </span></span><br><span class="line">-rw-r-----. 1 root named 152 8月  24 2021 /var/named/named.gzh.co</span><br></pre></td></tr></table></figure>

<p>配置此文件</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://oss.lingkongstudy.com.cn/linux/image-20231017212440817.png" alt="image-20231017212440817"></p>
<h4 id="2-3-4-修改反向解析文件"><a href="#2-3-4-修改反向解析文件" class="headerlink" title="2.3.4 修改反向解析文件"></a>2.3.4 修改反向解析文件</h4><p>配置反向查找区域，配置文件&#x2F;var&#x2F;named&#x2F;named.18.168.192</p>
<p>如果文件不存在，可以复制现有的实例文件，注意加参数-p</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@gzh-cs8 ~]<span class="comment"># cp -p /var/named/named.loopback /var/named/named.88.168.192</span></span><br><span class="line">[root@gzh-cs8 ~]<span class="comment"># ll /var/named/named.88.168.192 </span></span><br><span class="line">-rw-r-----. 1 root named 168 8月  24 2021 /var/named/named.88.168.192</span><br></pre></td></tr></table></figure>

<p>配置该文件</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://oss.lingkongstudy.com.cn/linux/image-20231017203456371.png" alt="image-20231017203456371"></p>
<p>修改<code>/etc/sysconfig/named</code>文件</p>
<p>添加</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">OPTIONS=<span class="string">&quot;-4&quot;</span></span><br></pre></td></tr></table></figure>

<p>启动named</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl start named</span><br></pre></td></tr></table></figure>

<p><code>注意:</code>如果你的named服务启动失败一定要检查一下配置文件是否出错</p>
<p>例如:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@gzh pub]<span class="comment"># named-checkconf -z /etc/named.conf</span></span><br><span class="line">zone gzh.co/IN: loaded serial 20231117</span><br><span class="line">zone 88.168.192.in-addr.arpa/IN: loaded serial 20231117</span><br><span class="line">zone 0.in-addr.arpa/IN: loaded serial 0</span><br></pre></td></tr></table></figure>

<p>出现这种字段的是没有问题的,如果出现其他类型的说明你的配置文件就有点问题.</p>
<p>下面是几个配置文件的关系</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://oss.lingkongstudy.com.cn/linux/image-20231018185225219.png" alt="image-20231018185225219"></p>
<p>首先named.conf中调用了named.gzh.zones文件,也就是include,然后named.gzh.zones里面写的内容对应的是后面的两个文件,如果你检查出错误了,一定要在这四个文件里面去找是否哪个地方写错了,最好是逐级去找.</p>
<h3 id="2-5-客户端测试"><a href="#2-5-客户端测试" class="headerlink" title="2.5 客户端测试"></a>2.5 客户端测试</h3><h4 id="2-5-1-安装工具包"><a href="#2-5-1-安装工具包" class="headerlink" title="2.5.1 安装工具包"></a>2.5.1 安装工具包</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum install -y bind-utils</span><br></pre></td></tr></table></figure>

<p>dns1与服务端配置的保持一致</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://oss.lingkongstudy.com.cn/linux/image-20231017205957610.png" alt="image-20231017205957610"></p>
<h4 id="2-5-3-测试"><a href="#2-5-3-测试" class="headerlink" title="2.5.3 测试"></a>2.5.3 测试</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># nslookup news.gzh.co</span></span><br><span class="line">Server:         192.168.88.137</span><br><span class="line">Address:        192.168.88.137<span class="comment">#53</span></span><br><span class="line"></span><br><span class="line">Name:   news.gzh.co</span><br><span class="line">Address: 192.168.88.40</span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># dig -x www.gzh.co</span></span><br><span class="line"></span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.11.4-P2-RedHat-9.11.4-26.P2.el7_9.14 &lt;&lt;&gt;&gt; -x www.gzh.co</span><br><span class="line">;; global options: +cmd</span><br><span class="line">;; Got answer:</span><br><span class="line">;; -&gt;&gt;HEADER&lt;&lt;- <span class="string">opcode: QUERY, status: SERVFAIL, id: 45238</span></span><br><span class="line"><span class="string">;; flags: qr rd ra; QUERY: 1, ANSWER: 0, AUTHORITY: 0, ADDITIONAL: 1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">;; OPT PSEUDOSECTION:</span></span><br><span class="line"><span class="string">; EDNS: version: 0, flags:; udp: 1232</span></span><br><span class="line"><span class="string">;; QUESTION SECTION:</span></span><br><span class="line"><span class="string">;co.gzh.www.in-addr.arpa.       IN      PTR</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">;; Query time: 0 msec</span></span><br><span class="line"><span class="string">;; SERVER: 192.168.88.137#53(192.168.88.137)</span></span><br><span class="line"><span class="string">;; WHEN: 二 10月 17 21:43:33 CST 2023</span></span><br><span class="line"><span class="string">;; MSG SIZE  rcvd: 52</span></span><br></pre></td></tr></table></figure>

<p>如果测试失败,把防火墙关掉.</p>
<h2 id="3-电子邮件服务"><a href="#3-电子邮件服务" class="headerlink" title="3.电子邮件服务"></a>3.电子邮件服务</h2><h3 id="1-设置hostname并更新-etc-hosts"><a href="#1-设置hostname并更新-etc-hosts" class="headerlink" title="1.设置hostname并更新 &#x2F;etc&#x2F;hosts"></a>1.设置hostname并更新 &#x2F;etc&#x2F;hosts</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@gzh ~]<span class="comment"># hostnamectl set-hostname gzh.com</span></span><br><span class="line">[root@gzh ~]<span class="comment"># vim /etc/hosts</span></span><br><span class="line">[root@gzh ~]<span class="comment"># cat /etc/hosts </span></span><br><span class="line">127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4</span><br><span class="line">::1         localhost localhost.localdomain localhost6 localhost6.localdomain6</span><br><span class="line">192.168.88.137 gzh.com</span><br></pre></td></tr></table></figure>



<h3 id="2-安装并启用-Postfix-服务"><a href="#2-安装并启用-Postfix-服务" class="headerlink" title="2.安装并启用 Postfix 服务"></a>2.安装并启用 Postfix 服务</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@gzh-cs8 ~]<span class="comment"># yum -y install postfix</span></span><br><span class="line">[root@gzh-cs8 ~]<span class="comment"># systemctl start postfix</span></span><br><span class="line">[root@gzh-cs8 ~]<span class="comment"># systemctl enable postfix</span></span><br><span class="line">Created symlink /etc/systemd/system/multi-user.target.wants/postfix.service → /usr/lib/systemd/system/postfix.service.</span><br></pre></td></tr></table></figure>

<h3 id="3-安装-mailx-邮件客户端"><a href="#3-安装-mailx-邮件客户端" class="headerlink" title="3.安装 mailx 邮件客户端"></a>3.安装 mailx 邮件客户端</h3><p>在配置 Postfix 服务器之前，我们需要安装 <code>mailx</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum -y install mailx</span><br></pre></td></tr></table></figure>

<h3 id="4-配置-Postfix-邮件服务器"><a href="#4-配置-Postfix-邮件服务器" class="headerlink" title="4.配置 Postfix 邮件服务器"></a>4.配置 Postfix 邮件服务器</h3><p>Postfix 的配置文件位于 <code>/etc/postfix/main.cf</code> 中。我们需要对配置文件进行一些修改.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /etc/postfix/main.cf</span><br><span class="line"><span class="comment"># 更新如下</span></span><br><span class="line">myhostname = mail.gzh.com</span><br><span class="line">mydomain = gzh.com</span><br><span class="line">myorigin = <span class="variable">$mydomain</span></span><br><span class="line">inet_interfaces = all</span><br><span class="line">inet_protocols = all</span><br><span class="line">mydestination = <span class="variable">$myhostname</span>, localhost.<span class="variable">$mydomain</span>, localhost, <span class="variable">$mydomain</span></span><br><span class="line">mynetworks = 192.168.88.0/24, 127.0.0.0/8</span><br><span class="line">home_mailbox = Maildir/</span><br></pre></td></tr></table></figure>

<p>完成后，保存并退出配置文件。重新启动 postfix 服务以使更改生效</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl restart postfix</span><br></pre></td></tr></table></figure>

<h3 id="5-测试邮件服务"><a href="#5-测试邮件服务" class="headerlink" title="5.测试邮件服务"></a>5.测试邮件服务</h3><p>首先，创建一个测试用户</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">useradd gzh</span><br><span class="line">passwd gzh</span><br></pre></td></tr></table></figure>

<p>安装telnet</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum -y install telnet</span><br></pre></td></tr></table></figure>

<p>测试服务</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[gzh@gzh ~]$ telnet localhost 25</span><br><span class="line">Trying ::1...</span><br><span class="line">Connected to localhost.</span><br><span class="line">Escape character is <span class="string">&#x27;^]&#x27;</span>.</span><br><span class="line">220 mail.gzh.com ESMTP Postfix</span><br><span class="line">ehlo localhost <span class="comment"># 向服务器表明身份</span></span><br><span class="line">250-mail.gzh.com</span><br><span class="line">250-PIPELINING</span><br><span class="line">250-SIZE 10240000</span><br><span class="line">250-VRFY</span><br><span class="line">250-ETRN</span><br><span class="line">250-STARTTLS</span><br><span class="line">250-ENHANCEDSTATUSCODES</span><br><span class="line">250-8BITMIME</span><br><span class="line">250-DSN</span><br><span class="line">250 SMTPUTF8</span><br><span class="line">halo mail.gzh.com </span><br><span class="line">502 5.5.2 Error: <span class="built_in">command</span> not recognized</span><br><span class="line">helo mail.gzh.com </span><br><span class="line">250 mail.gzh.com</span><br><span class="line">mail from:root <span class="comment"># 设置寄件人</span></span><br><span class="line">250 2.1.0 Ok</span><br><span class="line">rcpt to:gzh <span class="comment"># 设置收件人</span></span><br><span class="line">250 2.1.5 Ok</span><br><span class="line">data</span><br><span class="line">354 End data with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;</span><br><span class="line">hello world!</span><br><span class="line">.</span><br><span class="line">250 2.0.0 Ok: queued as 38D0A61F84DB</span><br><span class="line">quit</span><br><span class="line">221 2.0.0 Bye</span><br><span class="line">Connection closed by foreign host.</span><br></pre></td></tr></table></figure>

<h2 id="4-FTP服务"><a href="#4-FTP服务" class="headerlink" title="4.FTP服务"></a>4.FTP服务</h2><h3 id="4-1-安装vsftpd-ftp"><a href="#4-1-安装vsftpd-ftp" class="headerlink" title="4.1 安装vsftpd+ftp"></a>4.1 安装<code>vsftpd</code>+<code>ftp</code></h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum install -y vsftpd</span><br><span class="line">yum install -y ftp <span class="comment"># 测试使用，搭建FTP服务器只需要vsftpd</span></span><br></pre></td></tr></table></figure>

<h3 id="4-2-开启服务"><a href="#4-2-开启服务" class="headerlink" title="4.2 开启服务"></a>4.2 开启服务</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl start vsftpd</span><br></pre></td></tr></table></figure>

<h3 id="4-3-修改配置文件"><a href="#4-3-修改配置文件" class="headerlink" title="4.3 修改配置文件"></a>4.3 修改配置文件</h3><p>配置文件默认为<code>/etc/vsftpd/vsftpd.conf</code>：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /etc/vsftpd/vsftpd.conf</span><br></pre></td></tr></table></figure>

<p>首先修改<code>anonymous_enable=YES</code>，再添加一行<code>anon_upload_enable=YES</code>：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://oss.lingkongstudy.com.cn/linux/image-20231018182255023.png" alt="image-20231018182255023"></p>
<p>第一行的意思是允许匿名登录，第二行的意思是允许匿名上传，接着重启服务：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">systemctl restart vsftpd</span><br></pre></td></tr></table></figure>

<h3 id="4-4测试准备"><a href="#4-4测试准备" class="headerlink" title="4.4测试准备"></a>4.4测试准备</h3><p>安装部分就算完成了，下面是测试。</p>
<p>在测试之前先创建测试文件：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@gzh ~]<span class="comment"># cd /var/ftp/pub</span></span><br><span class="line">[root@gzh pub]<span class="comment"># vim test</span></span><br><span class="line">[root@gzh pub]<span class="comment"># cat test</span></span><br><span class="line">my name is gzh</span><br></pre></td></tr></table></figure>

<p>在主机上测试ftp</p>
<p>如图所示: </p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://oss.lingkongstudy.com.cn/linux/image-20231018183331808.png" alt="image-20231018183331808"></p>
<p>在测试之前要关闭防火墙和关闭<code>SELinux</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@gzh pub]<span class="comment"># systemctl stop firewalld</span></span><br><span class="line">或者是开启21端口对应的服务</span><br><span class="line">firewall-cmd --add-port=21/tcp --permanent</span><br><span class="line">[root@gzh pub]<span class="comment"># setenforce 0 # 临时关闭</span></span><br></pre></td></tr></table></figure>

<p>用户登录测试</p>
<p>在地址栏输入<code>ftp://gzh@192.168.88.137</code>,这里可以选择是否匿名登录</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://oss.lingkongstudy.com.cn/linux/image-20231018183808819.png" alt="image-20231018183808819"></p>
<p>还有其他ftp的测试方式可以根据书本上所说的自行测试,这里只简单做个测试.</p>
<p>还有一点就是我这里用的是我上面做邮件服务时新增的用户登陆的,里面存放着maildir文件夹</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://oss.lingkongstudy.com.cn/linux/image-20231019103641042.png" alt="image-20231019103641042"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://oss.lingkongstudy.com.cn/linux/image-20231019103753344.png" alt="image-20231019103753344"></p>
<p>这个路径下存放的就是我们在邮件服务中发送的内容了.</p>
<h2 id="5-注意事项"><a href="#5-注意事项" class="headerlink" title="5.注意事项"></a>5.注意事项</h2><p>在做DHCP服务的时候要确定好自己服务端的网卡配置,服务端是两张网卡,客户端是一个网卡.</p>
<p>在做DNS服务的时候,一定要仔细检查修改的文件有没有问题,哪怕一个字符错了都会导致你DNS服务失败.</p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/head.png" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/head.png" title="头像" alt="头像"></a><div class="post-copyright__author_name">爱吃窝窝头</div><div class="post-copyright__author_desc">不争日夜，只争朝夕</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://acwwt.github.io/posts/4416b5c/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://acwwt.github.io/posts/4416b5c/')">网络服务</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/wechat.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/qrcode-alipay.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div><div class="reward-link mode"><a class="reward-link-button" href="/wechat/"><i class="anzhiyufont anzhiyu-icon-plant-fill"></i>运营模式与责任</a></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://acwwt.github.io/posts/4416b5c/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=网络服务&amp;url=https://acwwt.github.io/posts/4416b5c/&amp;pic=" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://acwwt.github.io" target="_blank">苹果屋🍎</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/linux%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>linux自动化运维<span class="tagsPageCount">9</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="/img/head.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/33d67af5/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">网络安全与防火墙</div></div></a></div><div class="next-post pull-right"><a href="/posts/36fb4c45/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Linux命令与工具</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/posts/a5ee4717/" title="Centos8 安装及基础配置"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-11-30</div><div class="title">Centos8 安装及基础配置</div></div></a></div><div><a href="/posts/436f9440/" title="监控系统"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-11-14</div><div class="title">监控系统</div></div></a></div><div><a href="/posts/b2c6704d/" title="SHELL"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-11-30</div><div class="title">SHELL</div></div></a></div><div><a href="/posts/97c662f1/" title="KVM虚拟化技术"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-11-30</div><div class="title">KVM虚拟化技术</div></div></a></div><div><a href="/posts/36fb4c45/" title="Linux命令与工具"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-11-30</div><div class="title">Linux命令与工具</div></div></a></div><div><a href="/posts/33d67af5/" title="网络安全与防火墙"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-11-30</div><div class="title">网络安全与防火墙</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/head.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" ait="status"/></div></div><div class="author-info__description"></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">爱吃窝窝头</h1><div class="author-info__desc">不争日夜，只争朝夕</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/acwwt" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/1957007372" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content">修改了图片图床而且增加了评论系统,新网站已发布欢迎访问(https://blog.lingkongstudy.com.cn/)!!!</div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(/img/631ddb7c9b250.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(/img/631ddeb0900b7.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E7%AB%A0-%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.</span> <span class="toc-text">第五章 网络服务</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-DHCP%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.1.</span> <span class="toc-text">1.DHCP服务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1DHCP%E5%AE%9A%E4%B9%89"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1DHCP定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2%E5%AE%9E%E9%AA%8C%E8%A7%84%E5%88%92"><span class="toc-number">1.1.2.</span> <span class="toc-text">1.2实验规划</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3%E5%AE%9E%E9%AA%8C%E8%BF%87%E7%A8%8B"><span class="toc-number">1.1.3.</span> <span class="toc-text">1.3实验过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4%E5%AE%9E%E9%AA%8C%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.4.</span> <span class="toc-text">1.4实验结果</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-DNS%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.2.</span> <span class="toc-text">2.DNS服务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1%E9%85%8D%E7%BD%AE%E9%9D%99%E6%80%81ip%E5%9C%B0%E5%9D%80"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1配置静态ip地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E5%AE%89%E8%A3%85%E6%9C%8D%E5%8A%A1%E8%BD%AF%E4%BB%B6%E5%8C%85"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.2 安装服务软件包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E9%85%8D%E7%BD%AEDNS"><span class="toc-number">1.2.3.</span> <span class="toc-text">2.3 配置DNS</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-1%E4%BF%AE%E6%94%B9%E4%B8%BB%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">2.3.1修改主配置文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-2-%E4%BF%AE%E6%94%B9%E5%8C%BA%E5%9F%9F%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">2.3.2 修改区域配置文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-3-%E4%BF%AE%E6%94%B9%E6%AD%A3%E5%90%91%E8%A7%A3%E6%9E%90%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.3.3.</span> <span class="toc-text">2.3.3 修改正向解析文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-4-%E4%BF%AE%E6%94%B9%E5%8F%8D%E5%90%91%E8%A7%A3%E6%9E%90%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.3.4.</span> <span class="toc-text">2.3.4 修改反向解析文件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B5%8B%E8%AF%95"><span class="toc-number">1.2.4.</span> <span class="toc-text">2.5 客户端测试</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-1-%E5%AE%89%E8%A3%85%E5%B7%A5%E5%85%B7%E5%8C%85"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">2.5.1 安装工具包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-3-%E6%B5%8B%E8%AF%95"><span class="toc-number">1.2.4.2.</span> <span class="toc-text">2.5.3 测试</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.3.</span> <span class="toc-text">3.电子邮件服务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%AE%BE%E7%BD%AEhostname%E5%B9%B6%E6%9B%B4%E6%96%B0-etc-hosts"><span class="toc-number">1.3.1.</span> <span class="toc-text">1.设置hostname并更新 &#x2F;etc&#x2F;hosts</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AE%89%E8%A3%85%E5%B9%B6%E5%90%AF%E7%94%A8-Postfix-%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.3.2.</span> <span class="toc-text">2.安装并启用 Postfix 服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%AE%89%E8%A3%85-mailx-%E9%82%AE%E4%BB%B6%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-number">1.3.3.</span> <span class="toc-text">3.安装 mailx 邮件客户端</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E9%85%8D%E7%BD%AE-Postfix-%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">1.3.4.</span> <span class="toc-text">4.配置 Postfix 邮件服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%B5%8B%E8%AF%95%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.3.5.</span> <span class="toc-text">5.测试邮件服务</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-FTP%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.4.</span> <span class="toc-text">4.FTP服务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E5%AE%89%E8%A3%85vsftpd-ftp"><span class="toc-number">1.4.1.</span> <span class="toc-text">4.1 安装vsftpd+ftp</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E5%BC%80%E5%90%AF%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.4.2.</span> <span class="toc-text">4.2 开启服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.4.3.</span> <span class="toc-text">4.3 修改配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4%E6%B5%8B%E8%AF%95%E5%87%86%E5%A4%87"><span class="toc-number">1.4.4.</span> <span class="toc-text">4.4测试准备</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">1.5.</span> <span class="toc-text">5.注意事项</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/99832f47/" title="Python基础">Python基础</a><time datetime="2023-11-30T09:11:03.894Z" title="发表于 2023-11-30 17:11:03">2023-11-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/2e473f0e/" title="Python⽂件、⽇期和多线程">Python⽂件、⽇期和多线程</a><time datetime="2023-11-30T09:11:03.894Z" title="发表于 2023-11-30 17:11:03">2023-11-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/5cfc884b/" title="python字符串和正则">python字符串和正则</a><time datetime="2023-11-30T09:11:03.894Z" title="发表于 2023-11-30 17:11:03">2023-11-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/d7d7781/" title="Python绘图">Python绘图</a><time datetime="2023-11-30T09:11:03.894Z" title="发表于 2023-11-30 17:11:03">2023-11-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/ece6051d/" title="Python三⼤利器">Python三⼤利器</a><time datetime="2023-11-30T09:11:03.894Z" title="发表于 2023-11-30 17:11:03">2023-11-30</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2023 By <a class="footer-bar-link" href="/" title="爱吃窝窝头" target="_blank">爱吃窝窝头</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">56</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">5</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">2</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://smiling-bear-ii.gitee.io/lingkong/" title="Gitee博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="favicon.ico" alt="Gitee博客"/><span class="back-menu-item-text">Gitee博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=1345196066&amp;server=tencent"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/C%E8%AF%AD%E8%A8%80/" style="font-size: 0.88rem;">C语言<sup>19</sup></a><a href="/tags/Docker%E5%AD%A6%E4%B9%A0/" style="font-size: 0.88rem;">Docker学习<sup>1</sup></a><a href="/tags/linux%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4/" style="font-size: 0.88rem;">linux自动化运维<sup>9</sup></a><a href="/tags/python%E5%9F%BA%E7%A1%80/" style="font-size: 0.88rem;">python基础<sup>4</sup></a><a href="/tags/python%E5%AE%9E%E6%88%98/" style="font-size: 0.88rem;">python实战<sup>5</sup></a></div></div><hr/></div></div><div id="keyboard-tips"><div class="keyboardTitle">博客快捷键</div><div class="keybordList"><div class="keybordItem"><div class="keyGroup"><div class="key">shift K</div></div><div class="keyContent"><div class="content">关闭快捷键功能</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift A</div></div><div class="keyContent"><div class="content">打开/关闭中控台</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift M</div></div><div class="keyContent"><div class="content">播放/暂停音乐</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift D</div></div><div class="keyContent"><div class="content">深色/浅色显示模式</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift S</div></div><div class="keyContent"><div class="content">站内搜索</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift R</div></div><div class="keyContent"><div class="content">随机访问</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift H</div></div><div class="keyContent"><div class="content">返回首页</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift F</div></div><div class="keyContent"><div class="content">友链鱼塘</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift L</div></div><div class="keyContent"><div class="content">友链页面</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift P</div></div><div class="keyContent"><div class="content">关于本站</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift I</div></div><div class="keyContent"><div class="content">原版/本站右键菜单</div></div></div></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><a id="switch-commentBarrage" href="javascript:anzhiyu.switchCommentBarrage();" title="开关弹幕"><i class="anzhiyufont anzhiyu-icon-danmu"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="1345196066" server="tencent" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random"></meting-js></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/1345196066&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.20/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.4/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>var meting_api = "https://meting.qjqq.cn/?server=:server&type=:type&id=:id&auth=:auth&r=:r";
</script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.9",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 爱吃窝窝头 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script src="https://cdn.cbd.int/algoliasearch@4.18.0/dist/algoliasearch-lite.umd.js"></script><script src="https://cdn.cbd.int/instantsearch.js@4.56.5/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo.lingkongstudy.com.cn/',
      region: '',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.21/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo.lingkongstudy.com.cn/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"><script async src="/js/anzhiyu/comment_barrage.js"></script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://twikoo.lingkongstudy.com.cn/',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.21/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script>var visitorMail = "1420204102@qq.com";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>